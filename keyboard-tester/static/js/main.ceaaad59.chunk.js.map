{"version":3,"sources":["components/keyboard.tsx","index.tsx"],"names":["Keyboard","props","keyPressing","pressedKeys","keyMap","ansi104","unitWidth","value","concat","maxKeyWidth","currentRowWidth","onResize","keyboardWidth","windowWidth","window","innerWidth","keyBoardStyle","document","getElementById","style","width","transform","marginLeft","useEffect","addEventListener","react_default","a","createElement","id","map","row","className","height","key","w","h","x","legend","keyCode","keyWidth","keyHeight","includes","split","k","rootElement","ReactDOM","render","_useState","useState","_useState2","Object","slicedToArray","setKeyPressing","_useState3","_useState4","keyPress","setKeyPress","_useState5","_useState6","setPressedKeys","pushPressedKeys","e","code","toConsumableArray","removeEventListener","length","components_keyboard"],"mappings":"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","file":"static/js/main.ceaaad59.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport '../assets/scss/keyboard.scss';\n\nimport ansi104 from '../assets/layout/ANSI104.json';\n\ntype TKey = {\n  w?: number;\n  h?: number;\n  x?: number;\n  y?: number;\n  legend?: string;\n  keyCode?: string;\n  className?: string;\n};\ntype KeyRow = TKey[];\ntype KeyMap = KeyRow[];\n\ntype KeyboardProps = {\n  keyPressing: string;\n  pressedKeys: string[];\n}\nconst Keyboard = (props: KeyboardProps) => {\n  const {\n    keyPressing,\n    pressedKeys\n  } = props;\n\n  const keyMap: KeyMap = ansi104;\n  const unit = 60;\n  const unitWidth = (value: number) => `${value*unit}px`;\n\n  let maxKeyWidth = 0;\n  let currentRowWidth = 0;\n\n  const onResize = () => {\n    const keyboardWidth = maxKeyWidth*unit;\n    const windowWidth = window.innerWidth;\n    const keyBoardStyle = (document.getElementById('keyboard') as any).style;\n    keyBoardStyle.width = `${keyboardWidth}px`;\n    keyBoardStyle.transform = `scale(${windowWidth / (keyboardWidth + 100)})`;\n    keyBoardStyle.marginLeft = `${(windowWidth - keyboardWidth - 50) / 2}px`;\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => window.addEventListener('resize', onResize);\n  }, [])\n\n  return (\n    <div id=\"keyboard\">\n      {\n        keyMap.map(row => {\n          if ( maxKeyWidth < currentRowWidth) {\n            maxKeyWidth = currentRowWidth;\n          }\n          currentRowWidth = 0;\n          return (\n            <div className=\"row\" style={{height: unit}}>\n              {\n                row.map(key => {\n                  const {\n                    w, h, x, legend, keyCode, className\n                  } = key;\n                  const keyWidth = w || 1;\n                  const keyHeight = h || 1;\n                  if (x) {\n                    currentRowWidth += x;\n                    return <div className=\"key-space\" style={{height: unit, width: unitWidth(x)}} />\n                  }\n\n                  if (legend && keyCode) {\n                    currentRowWidth += keyWidth;\n                    return (\n                      <div\n                        className={`key ${keyCode}${pressedKeys.includes(keyCode) ? ' pressed' : ''}${keyPressing === keyCode ? ' pressing' : ''}`}\n                        style={{\n                          height: unitWidth(keyHeight),\n                          width: unitWidth(keyWidth)\n                        }}\n                      >\n                        <div className={`keyCap ${className ? className : ''}`}>\n                          { legend.split('\\n').map(k => <p>{k}<br/></p>) }\n                        </div>\n                      </div>\n                    )\n                  }\n                })\n              }\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\n\nexport default Keyboard\n","import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./assets/scss/style.scss\";\nimport Keyboard from \"./components/keyboard\";\n\nconst App = () => {\n  const [keyPressing, setKeyPressing] = useState<string>('');\n  const [keyPress, setKeyPress] = useState<string>('');\n  const [pressedKeys, setPressedKeys] = useState<string[]>([]);\n\n  const pushPressedKeys = (e: KeyboardEvent) => {\n    const { code, key } = e;\n    setKeyPress(key);\n    if (!pressedKeys.includes(code)) {\n      setPressedKeys([...pressedKeys, code]);\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', (e) => {\n      setKeyPressing(e.code);\n    });\n    document.addEventListener('keyup', () => {\n      setKeyPressing('');\n    });\n  }, []);\n\n  useEffect(() => {\n    document.addEventListener('keydown', pushPressedKeys);\n    return () => document.removeEventListener('keydown', pushPressedKeys);\n  }, [pressedKeys.length]);\n\n  return (\n    <div className=\"App\">\n      <h1>Keyboard tester</h1>\n      <h2>\n        Last key pressed: <span>{keyPress}</span>\n      </h2>\n      <Keyboard\n        keyPressing={keyPressing}\n        pressedKeys={pressedKeys}\n      />\n    </div>\n  );\n};\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}