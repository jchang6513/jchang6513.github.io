{"version":3,"sources":["components/keyboard.tsx","index.tsx"],"names":["Keyboard","props","keyPressing","pressedKeys","keyMap","ansi104","unitWidth","value","concat","maxKeyWidth","currentRowWidth","useEffect","keyboardWidth","windowWidth","window","innerWidth","keyBoardStyle","document","getElementById","style","width","transform","marginLeft","react_default","a","createElement","id","map","row","className","height","key","w","h","x","legend","keyCode","keyWidth","keyHeight","includes","split","k","rootElement","ReactDOM","render","_useState","useState","_useState2","Object","slicedToArray","setKeyPressing","_useState3","_useState4","keyPress","setKeyPress","_useState5","_useState6","setPressedKeys","pushPressedKeys","e","code","toConsumableArray","addEventListener","removeEventListener","length","components_keyboard"],"mappings":"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","file":"static/js/main.072e3e2c.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport '../assets/scss/keyboard.scss';\n\nimport ansi104 from '../assets/layout/ANSI104.json';\n\ntype TKey = {\n  w?: number;\n  h?: number;\n  x?: number;\n  y?: number;\n  legend?: string;\n  keyCode?: string;\n  className?: string;\n};\ntype KeyRow = TKey[];\ntype KeyMap = KeyRow[];\n\ntype KeyboardProps = {\n  keyPressing: string;\n  pressedKeys: string[];\n}\nconst Keyboard = (props: KeyboardProps) => {\n  const {\n    keyPressing,\n    pressedKeys\n  } = props;\n\n  const keyMap: KeyMap = ansi104;\n  const unit = 60;\n  const unitWidth = (value: number) => `${value*unit}px`;\n\n  let maxKeyWidth = 0;\n  let currentRowWidth = 0;\n\n  useEffect(() => {\n    const keyboardWidth = maxKeyWidth*unit;\n    const windowWidth = window.innerWidth;\n    const keyBoardStyle = (document.getElementById('keyboard') as any).style;\n    keyBoardStyle.width = `${keyboardWidth}px`;\n    keyBoardStyle.transform = `scale(${windowWidth / (keyboardWidth + 100)})`;\n    keyBoardStyle.marginLeft = `${(windowWidth - keyboardWidth - 50) / 2}px`;\n  }, [maxKeyWidth]);\n\n  return (\n    <div id=\"keyboard\">\n      {\n        keyMap.map(row => {\n          if ( maxKeyWidth < currentRowWidth) {\n            maxKeyWidth = currentRowWidth;\n          }\n          currentRowWidth = 0;\n          return (\n            <div className=\"row\" style={{height: unit}}>\n              {\n                row.map(key => {\n                  const {\n                    w, h, x, legend, keyCode, className\n                  } = key;\n                  const keyWidth = w || 1;\n                  const keyHeight = h || 1;\n                  if (x) {\n                    currentRowWidth += x;\n                    return <div className=\"key-space\" style={{height: unit, width: unitWidth(x)}} />\n                  }\n\n                  if (legend && keyCode) {\n                    currentRowWidth += keyWidth;\n                    return (\n                      <div\n                        className={`key ${keyCode}${pressedKeys.includes(keyCode) ? ' pressed' : ''}${keyPressing === keyCode ? ' pressing' : ''}`}\n                        style={{\n                          height: unitWidth(keyHeight),\n                          width: unitWidth(keyWidth)\n                        }}\n                      >\n                        <div className={`keyCap ${className ? className : ''}`}>\n                          { legend.split('\\n').map(k => <p>{k}<br/></p>) }\n                        </div>\n                      </div>\n                    )\n                  }\n                })\n              }\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\n\nexport default Keyboard\n","import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./assets/scss/style.scss\";\nimport Keyboard from \"./components/keyboard\";\n\nconst App = () => {\n  const [keyPressing, setKeyPressing] = useState<string>('');\n  const [keyPress, setKeyPress] = useState<string>('');\n  const [pressedKeys, setPressedKeys] = useState<string[]>([]);\n\n  const pushPressedKeys = (e: KeyboardEvent) => {\n    const { code, key } = e;\n    setKeyPress(key);\n    if (!pressedKeys.includes(code)) {\n      setPressedKeys([...pressedKeys, code]);\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', (e) => {\n      setKeyPressing(e.code);\n    });\n    document.addEventListener('keyup', () => {\n      setKeyPressing('');\n    });\n  }, []);\n\n  useEffect(() => {\n    document.addEventListener('keydown', pushPressedKeys);\n    return () => document.removeEventListener('keydown', pushPressedKeys);\n  }, [pressedKeys.length]);\n\n  return (\n    <div className=\"App\">\n      <h1>Keyboard tester</h1>\n      <h2>\n        Last key pressed: <span>{keyPress}</span>\n      </h2>\n      <Keyboard\n        keyPressing={keyPressing}\n        pressedKeys={pressedKeys}\n      />\n    </div>\n  );\n};\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}